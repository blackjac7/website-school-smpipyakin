# ==============================================================================
# ENVIRONMENT VARIABLES CONFIGURATION
# ==============================================================================
# This file serves as a template for your environment configuration.
#
# USAGE:
# 1. Local Development: Copy to `.env`
# 2. Production/Staging: Set these variables in your deployment platform (Vercel, Railway, etc.)
#
# IMPORTANT:
# - Do NOT commit `.env` to version control.
# - Ensure secrets (JWT, API Keys) are strong and unique for each environment.
# ==============================================================================

# =========================================
# 1. CORE CONFIGURATION (Required)
# =========================================

# Database Connection (Prisma)
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=public
#
# LOCAL DEV:
# Example: postgresql://postgres:postgres@localhost:5432/school_db?schema=public
#
# STAGING (Aiven PostgreSQL):
# Aiven usually requires SSL. Ensure you copy the "Service URI" from Aiven console.
# Format: postgresql://avnadmin:password@host:port/defaultdb?sslmode=require
#
# PRODUCTION (VPS / Dedicated Server):
# Since you are hosting DB on a VPS, ensure your firewall allows connections from Vercel.
# Format: postgresql://postgres:password@YOUR_VPS_IP:5432/school_db?schema=public&sslmode=prefer
DATABASE_URL="postgresql://postgres:password@localhost:5432/school_db_dev?schema=public"

# Direct Database Connection
# Required for migrations.
# - For Aiven (Staging): Same as DATABASE_URL (unless using a separate pooler).
# - For VPS (Production): Same as DATABASE_URL.
DIRECT_URL="postgresql://postgres:password@localhost:5432/school_db_dev?schema=public"

# Node Environment
# Options: "development", "production", "test"
NODE_ENV="development"

# App Base URL
# Used for SEO canonical tags, OpenGraph images, and redirects.
# Local: http://localhost:3000
# Staging: https://staging.your-school.sch.id
# Prod: https://www.your-school.sch.id
NEXT_PUBLIC_APP_URL="http://localhost:3000"

# Authentication Secret
# Used to sign and verify JWT tokens.
# Run `openssl rand -base64 32` to generate a secure key.
JWT_SECRET="change_this_to_a_secure_random_string_min_32_chars"

# Cron Job Secret
# Secures /api/cron/* endpoints (Logs Cleanup, Maintenance Check).
# Run `openssl rand -hex 16` to generate.
CRON_SECRET="change_this_to_a_secure_random_string"


# =========================================
# 2. FILE STORAGE - Required
# =========================================

# -----------------------------------------
# 2a. Cloudinary (Images: News, Facilities, Extracurricular)
# -----------------------------------------
# Register at https://cloudinary.com/

# Main Cloudinary Credentials
NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME="your_cloud_name"
CLOUDINARY_API_KEY="your_api_key"
CLOUDINARY_API_SECRET="your_api_secret"

# Upload Preset for client-side uploads (Admin Dashboard)
# Create an unsigned upload preset in Cloudinary Settings â†’ Upload
NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET="ml_default"

# -----------------------------------------
# 2b. Cloudflare R2 (PPDB Document Storage)
# -----------------------------------------
# Used for PPDB registration document uploads (KK, Akta, Ijazah, etc.)
# These are already configured in your Vercel env vars


# =========================================
# 3. EXTERNAL SERVICES (Feature-based)
# =========================================

# EmailJS (Contact Form) - CURRENT SETUP
# Register at https://www.emailjs.com/ (Free: 200 emails/month)
NEXT_PUBLIC_EMAILJS_SERVICE_ID="your_service_id"
NEXT_PUBLIC_EMAILJS_TEMPLATE_ID="your_template_id"
NEXT_PUBLIC_EMAILJS_PUBLIC_KEY="your_public_key"

# Resend (RECOMMENDED ALTERNATIVE)
# Much higher limits (3000/month) and better developer experience.
# If you switch to Resend, uncomment this:
# RESEND_API_KEY="re_123456789"

# Cloudflare R2 (Document Storage)
# Used for PPDB document uploads (KK, Akta, Ijazah, etc.)
R2_ACCOUNT_ID="your_cf_account_id"
R2_ACCESS_KEY_ID="your_r2_access_key"
R2_SECRET_ACCESS_KEY="your_r2_secret_key"
R2_BUCKET_NAME="your_ppdb_docs_bucket_name"
R2_PUBLIC_URL="https://pub-xxx.r2.dev"

# Cloudflare R2 Files Bucket (PDF Files: Proposals, Announcements, Guides)
# Used for OSIS proposals, announcement attachments, PPDB guide PDFs
# Same R2 account but different bucket for better organization
R2_FILES_BUCKET_NAME="files"
R2_FILES_PUBLIC_URL="https://pub-xxx-files.r2.dev"

# Flowise AI (Chatbot)
# Used in the frontend script for the AI assistant (RAG).
NEXT_PUBLIC_FLOWISE_API_URL="https://your-flowise-instance.com"
NEXT_PUBLIC_FLOWISE_CHATFLOW_ID="your_chatflow_uuid"


# =========================================
# 4. ANALYTICS & MONITORING
# =========================================

# Vercel Speed Insights
# Set to "1" to enable Speed Insights in the Layout.
NEXT_PUBLIC_VERCEL_SPEED_INSIGHTS="1"


# =========================================
# 5. TUNING & LIMITS
# =========================================

# Maximum file upload size in bytes (Default: 5MB)
# Used in /api/upload endpoint.
MAX_FILE_SIZE="5242880"
